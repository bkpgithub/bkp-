<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>充满希望的一天</title>
  <link rel="icon" href="img/dnf.png" type="image/x-icon"/>
  <link rel="stylesheet" type="text/css" href="css/index.css">

</head>

<body>
  <div id="projects">
    <div class="grid">
      <div class="projects">
        <div id="aa">

        </div>
        <div class="aniwz ">
          <div class="text">深渊<br>挑战</div>
        </div>
        <div class="controls">
          <span class="bottom"></span>
          <span class="bottom"></span>
          <span class="bottom"></span>
          <div class="mask">
            <div class="text start"><span>开</span><span>始</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="bg_bg"></div>
  <div class="bg_main">
    <input type="text" value="" style="display:none;" />
    <div class="info">确定选择这张吗？</div>
    <div class="btn"><span class="qrxz">确认</span><span class="qxxz">取消</span></div>
  </div>

  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript">
    function getResult(arr) {
      var leng = 0;
      for (var i = 0; i < arr.length; i++) {
        leng += arr[i]
      }
      for (var i = 0; i < arr.length; i++) {
        var random = parseInt(Math.random() * leng);
        if (random < arr[i]) {
          return i
        } else {
          leng -= arr[i]
        }
      }
    }
    function aa() {
      var pArr = [1, 4, 2, 3];

      var gifts = [{
        "id": 2,
        "name": "万事荣光鞋子",
        "prop": 100
      },
      {
        "id": 1,
        "name": "万事荣光腰带",
        "prop": 100
      }, {
        "id": 1,
        "name": "万事荣光裤子",
        "prop": 100
      },
      {
        "id": 1,
        "name": "万事荣光上衣",
        "prop": 100
      },
      {
        "id": 1,
        "name": "万事荣光护肩",
        "prop": 100
      },
      {
        "id": 1,
        "name": "铁马长戈鞋子",
        "prop": 100
      },
      {
        "id": 1,
        "name": "铁马长戈腰带",
        "prop": 100
      },
      {
        "id": 1,
        "name": "铁马长戈裤子",
        "prop": 100
      },
      {
        "id": 1,
        "name": "铁马长戈上衣",
        "prop": 100
      },
      {
        "id": 1,
        "name": "铁马长戈护肩",
        "prop": 100
      },
      {
        "id": 1,
        "name": "星辰命运鞋子",
        "prop": 100
      },
      {
        "id": 1,
        "name": "星辰命运腰带",
        "prop": 100
      },
      {
        "id": 1,
        "name": "星辰命运裤子",
        "prop": 100
      },
      {
        "id": 1,
        "name": "星辰命运上衣",
        "prop": 100
      },
      {
        "id": 1,
        "name": "星辰命运护肩",
        "prop": 100
      },
      {
        "id": 1,
        "name": "上元节鞋子",
        "prop": 100
      },
      {
        "id": 1,
        "name": "上元节腰带",
        "prop": 100
      },
      {
        "id": 1,
        "name": "上元节裤子",
        "prop": 100
      },
      {
        "id": 1,
        "name": "上元节上衣",
        "prop": 100
      },
      {
        "id": 1,
        "name": "上元节护肩",
        "prop": 100
      },
      {
        "id": 1,
        "name": "时光轨迹鞋子",
        "prop": 100
      },
      {
        "id": 1,
        "name": "时光轨迹腰带",
        "prop": 100
      },
      {
        "id": 1,
        "name": "时光轨迹裤子",
        "prop": 100
      },
      {
        "id": 1,
        "name": "时光轨迹上衣",
        "prop": 100
      },
      {
        "id": 1,
        "name": "时光轨迹护肩",
        "prop": 100
      },
      {
        "id": 1,
        "name": "清泉流响",
        "prop": 10
      },
      {
        "id": 1,
        "name": "启明星的勾引",
        "prop": 10
      },
      {
        "id": 1,
        "name": "氤氲之息",
        "prop": 10
      },
      {
        "id": 1,
        "name": "罗塞塔石碑",
        "prop": 100
      },
      {
        "id": 1,
        "name": "波利斯黄金杯",
        "prop": 100
      },
      {
        "id": 1,
        "name": "英雄王象征",
        "prop": 100
      },
      {
        "id": 1,
        "name": "增幅12卷子",
        "prop": 1
      },
      {
        "id": 1,
        "name": "光头",
        "prop": 66666
      }
      ];
      var gArr = [];
      for (var i = 0; i < gifts.length; i++) {
        gArr.push(gifts[i]['prop'])
      }
      var html = "";
      $("#aa").html("");
      for (var i = 0; i < 8; i++) {
        var name=gifts[getResult(gArr)]['name'];
        if(name=="氤氲之息" || name=="启明星的勾引" || name=="清泉流响")
         html+="<div class=\"project\"><div class=\"mask\"><div class=\"back\" style='font-size:25px'><img src='img/"+name+".jpg' width='32px'>"+name+"</div><div class=\"front\"><span></span></div></div></div>";
        else if(name=="光头")
        html+="<div class=\"project\"><div class=\"mask\"><div class=\"back\" style='font-size:25px'><img src='img/"+name+".jpg' width='126px'></div><div class=\"front\"><span></span></div></div></div>";
       else
       html+="<div class=\"project\"><div class=\"mask\"><div class=\"back\" style='font-size:25px'>"+name+"</div><div class=\"front\"><span></span></div></div></div>";   
      }
      $("#aa").append(html);
    }
    $(function () {
      aa();
      $('.controls').on("click",function () {
        if ($(this).hasClass('show')) {
         
          $(this).removeClass('show');
          $('.start').html('<span>开</span><span>始</span>');
          subMove();
          window.location.reload();
        } else {
          $(this).addClass('show');
          $('.start').html('<span>重</span><span>置</span>');
          addMove();
         
        }
      })

      $('.project').on("click",function () {
        if ($(this).hasClass('showli')) {
          console.log(45);
        } else {
          var num = $(this).index();
          $('.bg_main input').val(num);
          $('.ani' + num).addClass('showli');
        }
      })
    })

    function addMove() {
      $('.project').each(function (index, item) {
        setTimeout(function () {
          $(item).addClass('ani' + index);
        }, index * 300);
      })
    }

    function subMove() {
      $('.project').each(function (index, item) {
        $('.project').removeClass('showli');
        $(item).removeClass('ani' + index);
      })
    }
  </script>

</body>

</html>